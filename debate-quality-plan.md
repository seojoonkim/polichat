# 폴리챗 토론 퀄리티 혁신 플랜

> 작성일: 2026-02-20 | 현재 시스템 분석 기반

---

## 🔥 즉시 임팩트 (구현 쉬움 + 효과 큼)

### 1. 감정 에스컬레이션 시스템 (Emotional Arc)
- **설명:** 현재는 매 라운드 동일한 감정 강도. 실제 TV토론처럼 초반 탐색 → 중반 긴장 → 후반 폭발의 감정 곡선을 설계
- **구현:** `getStylePrompt()`에서 `historyLength` 기반으로 감정 강도 레벨 주입. 초반(1-8) "정중하되 날카롭게", 중반(9-18) "직접 공격·비꼼 허용", 후반(19-30) "폭발·결정타·숨겨둔 카드"
- **코드 변경:** `api/debate.js`의 emotional 스타일 프롬프트에 `phase` 변수 추가 (consensus처럼)
  ```
  const intensity = historyLength < 8 ? 'controlled' : historyLength < 18 ? 'heated' : 'explosive';
  ```
- **예상 효과:** 토론에 서사적 흐름 부여. 후반부로 갈수록 몰입도 상승

### 2. 지문/행동 묘사 삽입
- **설명:** "(책상을 탁 치며)", "(실소하며)", "(안경을 고쳐쓰며 냉정하게)" 같은 지문을 발언 사이에 삽입
- **구현:** 시스템 프롬프트에 지문 묘사 지시 추가. 감정 강도에 따라 빈도 조절
  ```
  발언 시작 전 또는 중간에 괄호()로 행동/표정 묘사를 삽입하라. 
  예: "(한숨을 쉬며) 이게 과연 정책이라고 할 수 있겠습니까?"
  초반: 2발언에 1회, 후반: 매 발언
  ```
- **코드 변경:** `getStylePrompt()` 반환값에 지문 규칙 추가
- **예상 효과:** 텍스트만으로도 TV토론 현장감 구현. 캐릭터 생동감 대폭 향상

### 3. "끊기" 메커니즘 (인터럽트)
- **설명:** 실제 토론에서는 상대 말을 끊고 끼어드는 게 핵심 긴장요소. 특정 조건에서 상대 발언 중간에 끊기 발동
- **구현:** `runLiveDebate()`에서 상대 스트리밍 중 특정 키워드(거짓말, 왜곡, 사실과 다른) 감지 시 즉시 abort하고 반박 턴 시작
- **코드 변경:** `streamRound()` 내부에 interrupt 트리거 추가. 확률적으로 5-10% 발동
  ```javascript
  // 상대 발언 스트리밍 중 interrupt 체크
  if (Math.random() < 0.08 && streamedText.length > 100) {
    // 현재까지 스트리밍 저장 후 즉시 반박 턴
    interrupt = true;
    interruptedText = streamedText;
  }
  ```
- **예상 효과:** 예측 불가능성 + 실제 토론 현장감. 사용자가 "어 끊었다!" 하는 순간 몰입

### 4. 발언별 감정 태그 + UI 반영
- **설명:** API 응답에 감정 메타데이터(분노/비꼼/냉소/유머/자신감) 포함 → UI에서 말풍선 스타일 변화
- **구현:** debate API 응답에 `emotion` 필드 추가. 프롬프트에 "발언 끝에 [emotion:분노] 형태로 감정 태그를 붙여라" 지시
- **코드 변경:** 
  - `api/debate.js`: 프롬프트에 감정 태그 지시 추가, 응답 파싱 시 태그 추출
  - `DebateView.tsx`: `MessageBubble`에서 emotion에 따라 border color 강도, 흔들림 애니메이션, 이모지 표시
- **예상 효과:** 시각적 피드백으로 감정 전달력 2배 향상

### 5. 개인화된 공격 패턴 (캐릭터 특화)
- **설명:** 현재 공격 각도가 7가지 범용 패턴. 각 정치인별 고유 공격 스타일 부여
- **구현:** PERSONAS에 attackStyle 추가
  ```
  이준석: 데이터로 조목조목 → "숫자로 말씀드릴게요" / 상대 말 정확히 인용 후 반박
  전한길: 감정 폭발 → "국민 앞에서 그 말이 됩니까!" / 도덕적 분노
  정청래: 사자성어 + 풍자 → "이게 바로 적반하장이라는 겁니다"
  김어준: 느린 어조로 의문 제기 → "그런데요~ 왜 그 타이밍에 그랬을까요?"
  진중권: 학술적 비유 + 독설 → "이건 뭐 플라톤의 동굴 우화 수준이네요"
  ```
- **코드 변경:** `PERSONAS` 객체에 `attackStyle` 필드 추가, 프롬프트에 주입
- **예상 효과:** 정치인별 개성이 살아나면서 "이 사람 진짜 이렇게 말할 것 같다" 감상

### 6. 첫 발언 인삿말/도발 시스템
- **설명:** 실제 토론처럼 첫 발언에서 상대에 대한 인삿말이나 은근한 도발로 시작
- **구현:** `opponentLastMessage`가 빈 문자열(첫 발언)일 때 특별 프롬프트 주입
  ```
  첫 발언이니 상대에게 인사하되, 은근한 압박을 담아라.
  예: "오랜만에 뵙습니다, 구청장님. 오늘은 좀 다른 숫자를 준비해오셨으면 좋겠는데요."
  ```
- **코드 변경:** `api/debate.js`의 `finalUserMessage` 분기에서 첫 발언용 프롬프트 추가
- **예상 효과:** 토론 시작부터 긴장감 형성

### 7. 반전 카드 시스템
- **설명:** 후반부(20라운드+)에서 "숨겨둔 한 마디" 발동. 상대가 모르는 데이터나 상대의 과거 발언 인용
- **구현:** 각 정치인의 `공격포인트` 중 가장 강력한 1-2개를 "반전 카드"로 지정. 후반부 프롬프트에 주입
  ```
  🃏 반전 카드 (후반부 전용): 아직 사용하지 않은 가장 충격적인 사실을 이번 발언에서 터뜨려라.
  "그런데요, 한 가지 빠뜨린 게 있습니다..." 같은 전환으로 시작하라.
  ```
- **코드 변경:** `getStylePrompt()`에서 turnNum > 7일 때 반전 카드 프롬프트 추가
- **예상 효과:** 토론 후반부에 극적 반전 → 사용자 "대박" 반응

---

## 🎯 핵심 변화 (구현 중간 + 효과 매우 큼)

### 8. 3막 구조 토론 설계 (기승전결)
- **설명:** 30라운드를 3막으로 구조화. 1막(탐색 1-10), 2막(격돌 11-20), 3막(결전 21-30)
- **구현:** 각 막마다 다른 시스템 프롬프트 전략 적용
  ```
  1막: 입장 정립 + 탐색적 공격 → "제 입장을 먼저 말씀드리자면..."
  2막: 본격 격돌 + 상대 약점 집중 → 끊기 빈도 2배, 감정 강도 상승
  3막: 최종 결전 + 반전카드 + 마무리 발언 → "마지막으로 국민 여러분께..."
  ```
- **코드 변경:** `runLiveDebate()`에서 라운드별 phase 계산 → `streamRound()`에 전달 → API에서 phase별 프롬프트 분기
- **예상 효과:** 매 토론이 하나의 드라마. 시작-중간-끝이 확실한 서사 경험

### 9. 실시간 긴장도 게이지 (Tension Meter)
- **설명:** 화면 상단에 긴장도 바 표시. 감정 태그·키워드 분석으로 자동 계산
- **구현:** 
  - 감정 강도 점수: 분노/경멸 +3, 비꼼 +2, 차분 +0, 합의 -1
  - 특정 키워드 감지: "거짓말" +5, "증거" +3, "동의합니다" -2
  - 끊기 발생: +10
  ```javascript
  const [tension, setTension] = useState(30); // 0-100
  // 매 발언 완료 시 tension 업데이트
  const emotionScore = detectEmotion(text);
  setTension(prev => Math.min(100, Math.max(0, prev + emotionScore)));
  ```
- **UI:** 헤더 아래에 불꽃 모양 게이지 바. 80+ 시 빨갛게 불타는 효과
- **예상 효과:** 게임적 몰입 요소. "언제 100 찍을까" 기대감

### 10. 관중 반응 시스템 (가상 갤러리)
- **설명:** 매 발언 후 가상 관중 반응 표시 (👏 박수, 😲 충격, 🤣 웃음, 🤔 음...)
- **구현:** 발언 텍스트 분석으로 자동 반응 생성
  ```javascript
  function getAudienceReaction(text, emotion) {
    if (emotion === '분노' && text.includes('증거')) return { emoji: '😲', text: '와...' };
    if (emotion === '유머') return { emoji: '🤣', text: 'ㅋㅋㅋ' };
    if (emotion === '냉소') return { emoji: '👀', text: '오...' };
    // 랜덤 요소도 포함
  }
  ```
- **UI:** 말풍선 아래 작은 반응 배지 (2초간 표시 후 페이드아웃)
- **예상 효과:** 혼자 보는 토론이 아닌, "같이 보는" 느낌. 소셜 프레즌스

### 11. 사회자 AI 개입
- **설명:** 특정 조건에서 사회자가 토론에 개입 (주제 이탈 시 환기, 일방적 공격 시 발언권 조정, 팩트체크)
- **구현:** 토론 중간에 사회자 메시지 삽입 (별도 speaker로)
  ```javascript
  // 같은 키워드 3회 이상 반복 시
  if (keywordRepeatCount > 3) {
    insertModeratorMessage("잠깐, 같은 논점이 반복되고 있습니다. 다른 각도에서 논의해주시죠.");
  }
  // 한쪽이 3연속 공격당할 때
  if (consecutiveAttacks > 3) {
    insertModeratorMessage(`${attackedName}님, 반론 기회를 드리겠습니다.`);
  }
  ```
- **UI:** 사회자 말풍선은 중앙 정렬, 회색 배경, 🎙️ 아이콘
- **예상 효과:** TV토론 진행자 느낌. 토론 흐름 관리 + 새로운 재미 요소

### 12. 맞장구/리액션 발언
- **설명:** 현재 완전히 번갈아 발언하는 구조. 실제 토론에서는 짧은 맞장구("그건 아니죠", "그래서요?")가 끼어듦
- **구현:** 상대 발언 스트리밍 중 짧은 리액션 (0.5-1문장) 삽입 확률
  ```
  상대 발언이 120자 넘으면 10% 확률로 짧은 리액션 삽입
  리액션 풀: "그건 사실과 다릅니다", "계속 하세요", "아, 그러셨군요", "(고개를 저으며)"
  ```
- **UI:** 현재 발언자 말풍선 옆에 작은 리액션 버블 (반투명)
- **예상 효과:** 1:1 대화가 아닌 실제 토론 현장의 역동성

### 13. 토론 하이라이트 자동 생성
- **설명:** 토론 종료 후 "명장면 모음" 자동 생성. 가장 감정 강도가 높았던 3-5개 발언 선별
- **구현:** 각 발언의 emotion 점수 기록 → 종료 시 상위 5개 선별 → "하이라이트" 섹션 표시
- **코드 변경:** `DebateView.tsx`의 `finished` 페이즈에 하이라이트 카드 추가
- **예상 효과:** 공유 가능한 콘텐츠 생성. "이 부분 미쳤다" SNS 공유 유도

### 14. 동적 주제 전환 트리거
- **설명:** 현재 시간 기반(2분) 고정 전환. 토론 내용 기반으로 자연스러운 전환 트리거
- **구현:** 
  - 같은 논점 4회 이상 반복 → "주제 소진" 감지 → 자동 전환
  - 특정 키워드 등장 시 연관 주제로 전환 (부동산 → 청년주거)
  - 사회자 AI가 "이 부분은 추후 논의하고, 다음 주제로 넘어가겠습니다" 발언
- **예상 효과:** 자연스러운 흐름 + 다양한 주제 커버

---

## 🚀 게임체인저 (구현 복잡 + 혁신적)

### 15. 사용자 참여: 질문 던지기
- **설명:** 사용자가 토론 중 "질문 던지기" 버튼으로 양 후보에게 질문 가능
- **구현:**
  - 하단에 "질문하기" FAB 버튼
  - 탭하면 입력 모달 → 질문 입력
  - 다음 라운드에서 사회자가 "시민 질문이 들어왔습니다: ..." → 양측 답변
  ```javascript
  const [userQuestion, setUserQuestion] = useState(null);
  // 다음 라운드 시작 시
  if (userQuestion) {
    insertModeratorMessage(`시민 질문입니다: "${userQuestion}"`);
    // 다음 2턴은 이 질문에 대한 답변으로 진행
    currentTopic = userQuestion;
  }
  ```
- **예상 효과:** 사용자 에이전시 부여 → 몰입도 극대화. "내가 물어본 거에 답한다!"

### 16. 라이브 투표 + 판정 포인트
- **설명:** 매 5라운드마다 사용자 투표 ("이번 라운드 승자는?"). 최종 판정에 사용자 투표 반영
- **구현:**
  ```javascript
  // 5라운드마다 투표 모달
  if (round > 0 && round % 5 === 0) {
    setPhase('voting');
    // A vs B 버튼 → 3초 내 선택
    // 결과를 voteHistory에 저장
  }
  ```
- **UI:** 풀스크린 오버레이 "이번 라운드 승자는?" + 양측 프로필 탭 버튼 + 3초 타이머
- **예상 효과:** 게임화의 핵심. 사용자가 심판이 되는 경험

### 17. 멀티 토론 (2:2 또는 패널 토론)
- **설명:** 단순 1:1을 넘어 2:2 또는 4인 패널 토론 구현
- **구현:** 
  - 팀A (이준석+오세훈) vs 팀B (전한길+정원오) 같은 조합
  - 발언 순서: A1 → B1 → A2 → B2 → 자유토론
  - 같은 팀끼리도 미묘한 입장 차이 표현
- **예상 효과:** 콘텐츠 다양성 폭발. 정치인 간 의외의 조합에서 오는 재미

### 18. AI 실시간 팩트체크 패널
- **설명:** 토론 중 발언의 사실 여부를 실시간 체크하는 사이드 패널
- **구현:** 별도 API 호출로 발언의 수치/사실 검증 → "✅ 사실", "⚠️ 과장", "❌ 오류" 태그
- **UI:** 말풍선 옆에 작은 팩트체크 배지 (탭하면 상세 설명)
- **예상 효과:** 교육적 가치 + 신뢰도 향상. 단순 엔터테인먼트 넘어 정보 전달

### 19. 토론 리플레이 + 타임라인
- **설명:** 완료된 토론을 인터랙티브 타임라인으로 리플레이. 긴장도 그래프와 함께
- **구현:** 토론 데이터를 타임스탬프+감정점수와 함께 저장 → 리플레이 UI에서 시각화
- **UI:** 가로 타임라인 + 긴장도 곡선 + 주요 순간 마커 (클릭 시 해당 발언으로 이동)
- **예상 효과:** 재방문 유도. 콘텐츠 아카이브 가치

### 20. 토론 결과 공유 카드
- **설명:** 토론 종료 후 카카오톡/인스타 공유용 이미지 카드 자동 생성
- **구현:** Canvas API로 토론 결과 + 명장면 + 최종 점수를 이미지로 렌더링
- **예상 효과:** 바이럴 성장 엔진. 사용자가 자발적으로 홍보

### 21. 음성 합성 (TTS)
- **설명:** 각 정치인의 목소리에 가까운 TTS로 발언을 음성으로 재생
- **구현:** 11Labs 또는 유사 서비스로 각 정치인 보이스 클론 → 스트리밍 시 음성 동시 재생
- **예상 효과:** 몰입도 극한. "진짜 토론 보는 것 같다"

### 22. 적응형 난이도 (상대 강도 조절)
- **설명:** 사용자가 "얼마나 격렬한 토론을 원하는지" 슬라이더로 조절
- **구현:** 강도 1-5 설정 → API 프롬프트의 감정 강도, 공격성, 인신공격 허용 범위 조절
- **예상 효과:** 사용자별 맞춤 경험. 가벼운 토론 vs 격렬한 토론 선택

---

## 💡 프롬프트 개선안

### A. 감정 에스컬레이션 프롬프트

현재 emotional 스타일의 강도가 일정함. 라운드별 강도 분기 추가:

```javascript
// api/debate.js getStylePrompt() 내부
const emotionalPhase = historyLength < 8 ? 'opening' : historyLength < 18 ? 'confrontation' : 'climax';

const phaseInstructions = {
  opening: `[1막 — 탐색전] 정중하되 날카롭게. "(미소 지으며)" 같은 여유있는 지문 사용. 
상대 주장을 인정하는 척하며 약점을 찾아라. "좋은 지적이십니다만..." 으로 시작해 반박.
감정 표현: 냉소적 미소, 의미심장한 눈빛, 차분한 압박`,
  
  confrontation: `[2막 — 격돌] 본격 공격. "(목소리를 높이며)", "(테이블을 짚으며)" 같은 강한 지문.
상대 발언을 직접 인용해서 모순을 폭로. "방금 ~라고 하셨는데, 그게 말이 됩니까?"
감정 표현: 분노, 황당, 경멸, 비웃음. 끊어치기 허용.`,
  
  climax: `[3막 — 결전] 모든 것을 건 마지막 라운드. "(일어서며)", "(관객을 바라보며)" 같은 드라마틱 지문.
그동안 아끼던 결정타를 날려라. "마지막으로 한 가지만 말씀드리겠습니다..."
감정 표현: 격앙, 호소, 자신감, 단호. 국민에게 직접 호소 허용.`,
};
```

### B. 캐릭터별 화법 강화 프롬프트

현재 PERSONAS의 특성 설명이 1-2줄로 너무 짧음. 각 정치인의 실제 화법 패턴을 구체적으로 지정:

```
// 이준석 강화
특성 추가:
- 상대 발언의 논리적 오류를 즉시 포착하고 "그 논리대로라면 ~도 성립해야 하는데" 형태로 귀류법 사용
- 숫자를 먼저 던진 후 해석: "126건입니다. 126건. 그 중 인정된 건 몇 건이죠? 0건입니다."
- 상대의 감정적 반응에 더 냉정하게: "(상대가 흥분할수록 차분하게)"

// 전한길 강화  
특성 추가:
- 감정이 먼저 나오고 근거가 뒤따르는 구조: "이게 말이 됩니까! (잠시 숨을 고르며) 국정원 보고서에..."
- 반복 수사법: "부정선거입니다. 부정선거. 이걸 왜 못 알아듣는 겁니까?"
- 도덕적 분노: "국민을 뭘로 보시는 겁니까?"

// 정청래 강화
특성 추가:
- 사자성어 필수: 매 발언 1개 이상 ("적반하장", "아전인수", "호가호위")
- 리스트형 공격: "첫째! ~, 둘째! ~, 셋째! ~" 구조
- 유머 + 독설: "장동혁 대표님, 그 법안 제목이라도 다 읽어보셨습니까?"
```

### C. 반박 품질 향상 프롬프트

현재 `mustRebutClaim`이 있지만 반박이 피상적임. 3단계 반박 구조 강제:

```
🎯 필수 반박 3단 구조:
1단계 — 직접 인용: 상대가 "XX"라고 했다 (원문 그대로)
2단계 — 팩트 반박: 실제 데이터는 YY이다 (수치·출처 명시)  
3단계 — 의미 확장: 따라서 상대 주장의 본질은 ZZ이다 (프레임 재설정)

예시:
"${opponentName}이 방금 '10.15 대책으로 집값이 안정됐다'고 하셨는데요, (1단계)
서울 아파트 중위가격은 2025년 12월 기준 10억3천만원으로 오히려 상승했습니다. (2단계)
결국 규제만 하고 공급은 안 한다는 걸 스스로 증명하신 거예요. (3단계)"
```

### D. "같은 말 안 하기" 강화

현재 반복 방지가 수치·테마 기반이지만 여전히 유사 주장 반복됨. 의미론적 반복 차단:

```
🚫 의미론적 반복 금지 (강화):
아래는 이미 사용한 논점의 핵심 의미:
1. [규제가 공급을 위축시킨다] ← 이 의미를 다른 단어로 반복해도 금지
2. [윤석열 정부가 감세로 세수를 줄였다] ← 동의어/유의어로 재포장 금지

✅ 반드시 "새로운 사실" 또는 "새로운 각도"를 도입하라:
- 아직 언급 안 한 법안, 통계, 사건, 인물, 날짜를 사용할 것
- 같은 결론이라도 완전히 다른 근거에서 도달할 것
```

---

## 🎬 UX/인터랙션 아이디어

### UI-1. 토론 분위기 배경 변화
- 긴장도 30 이하: 차분한 블루 그라데이션 배경
- 긴장도 50-70: 오렌지 톤으로 전환
- 긴장도 80+: 붉은 배경 + 미세한 화면 흔들림 효과
- 끊기 발생: 화면 번쩍임(0.1초 화이트 플래시)

### UI-2. 말풍선 타이핑 효과 개선
- 현재: 글자 단위 타이핑
- 개선: 감정에 따른 타이핑 속도 변화
  - 분노: 빠른 타이핑 (30ms) + 말풍선 약간 흔들림
  - 냉소: 느린 타이핑 (80ms) + 점(...)이 길게
  - 자신감: 일정한 속도 + 굵은 폰트 강조

### UI-3. 스플릿 뷰 (태블릿/데스크탑)
- 좌측: A후보 발언 히스토리
- 우측: B후보 발언 히스토리  
- 중앙: 현재 발언 하이라이트 + 긴장도 게이지
- 모바일: 기존 카톡 스타일 유지

### UI-4. 사운드 이펙트
- 새 발언 시작: "딩" 소리
- 끊기 발생: "삐빅" 경고음
- 주제 전환: 드라마틱한 전환음
- 투표 시간: 카운트다운 틱톡
- 토론 종료: 벨소리

### UI-5. 토론 대기 화면 개선
- 현재 코인플립만 있음
- 추가: "오늘의 토론 프리뷰" — 양 후보의 최근 발언/공약 요약 카드
- "전적" 표시: 이전 토론에서 각 후보 승률 (캐시 기반)
- 베팅 요소: "누가 이길까?" 사전 예측 → 토론 후 결과와 비교

### UI-6. 토론 채팅방 (소셜)
- 같은 토론을 여러 사용자가 동시 시청
- 우측에 채팅창 (실시간 반응)
- "ㅋㅋㅋ", "와...", "팩트폭격" 같은 실시간 반응
- 구현 난이도 높지만 바이럴 효과 극대화

### UI-7. 커스텀 토론 주제
- 사용자가 직접 토론 주제 입력 가능
- "AI가 일자리를 뺏는다", "비트코인 규제해야 하나" 등
- 정치인별 관련 정책 지식베이스에서 자동 매칭

---

## 📊 구현 우선순위 로드맵

### Phase 1 (1-2일) — 프롬프트만 변경
1. 감정 에스컬레이션 (#1)
2. 지문/행동 묘사 (#2)  
3. 캐릭터별 공격 패턴 (#5)
4. 첫 발언 인삿말 (#6)
5. 반전 카드 (#7)
6. 반박 품질 향상 (프롬프트 C)
7. 의미론적 반복 차단 (프롬프트 D)

### Phase 2 (3-5일) — 프론트엔드 변경
8. 감정 태그 + UI (#4)
9. 3막 구조 (#8)
10. 긴장도 게이지 (#9)
11. 관중 반응 (#10)
12. 배경 분위기 변화 (UI-1)
13. 타이핑 효과 개선 (UI-2)

### Phase 3 (1-2주) — 기능 추가
14. 끊기 메커니즘 (#3)
15. 사회자 AI (#11)
16. 맞장구 리액션 (#12)
17. 사용자 질문 던지기 (#15)
18. 라이브 투표 (#16)
19. 토론 하이라이트 (#13)
20. 결과 공유 카드 (#20)

### Phase 4 (장기) — 혁신 기능
21. 멀티 토론 (#17)
22. 팩트체크 패널 (#18)
23. 토론 리플레이 (#19)  
24. 음성 합성 (#21)
25. 소셜 시청 (UI-6)
