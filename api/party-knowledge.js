// 정당 정책 지식베이스 (2026-02 기준)
// 4대 LLM 리서치 취합: Grok, Gemini, GPT, Claude Opus

export const PARTY_KNOWLEDGE = {

  // ── 국민의힘 (PPP) ──────────────────────────────────────────────────────
  ppp: {
    name: '국민의힘',
    status: '제1야당 (2024.12.3 계엄→탄핵 후 야당 전환)',
    leader: '장동혁 대표 (한동훈 전 대표 2026.01.29 제명)',
    core_positions: {
      부동산: '이재명 정부 10.15 대책 전면 철회 요구. 공급 위축·반시장적 규제 비판. 재건축/재개발 규제 완화·거래세 인하. 오세훈 시장 354곳 정비구역 vs 정부 규제 충돌.',
      경제: '상속세 대개편(완화/폐지) 추진, 기업 활력·자본 유출 방지, 민간 주도 성장. 이재명 정부 확장재정(210조) 비판.',
      복지: '현금살포성 복지(지역화폐) 지양, 약자 복지 집중, 재정 건전성 강조.',
      안보: '한미동맹 강화, 힘에 의한 평화, 대북 강경 기조.',
      사법개혁: '권력형 비리 수사 독립성 보장, 이재명 정부 사법 리스크 견제.'
    },
    pledges_2022: [
      '부동산: 5년 250만호 공급(수도권 130만호), 재건축 안전진단 완화, 임대차 3법 재검토',
      '경제: 법인세 인하(25→22%), 규제 혁파, 민간 주도 성장',
      '복지: 부모급여(월100만원), 기초연금 40만원 인상',
      '안보: 한미동맹 재건, 사드 추가배치 검토'
    ],
    broken_pledges: ['250만호 공급 목표 미달', '여성가족부 폐지 미이행', '사드 추가배치 무산', '주52시간제 폐지(주69시간제) 철회'],
    stance_changes: [
      '12.3 계엄·탄핵 후 여당→야당 전환, 정부 비판 노선으로 전환',
      '내부 쇄신 시도: 친윤 색채 탈피 표방 (but 계파갈등 지속)',
      '사법개혁 반대→협의 가능성 시사 (일부 유연화)',
      '재건축 규제 완화 강하게 주장 (오세훈과 보조 맞추기)'
    ]
  },

  // ── 더불어민주당 (DP) ────────────────────────────────────────────────────
  dp: {
    name: '더불어민주당',
    status: '여당 (이재명 대통령 2025년 취임)',
    leader: '정청래 대표',
    core_positions: {
      부동산: '10.15 대책(2025.10): 서울 전역 투기과열지구+토허구역+조정대상지역 3중 규제. 기본주택 100만호 공급, 다주택자 규제 강화, 분양가상한제 유지. 전세사기특별법 2년 연장 통과.',
      경제: '기본소득 철회(2025 대선에서 제외), AI 3대 강국 목표, 5년 210조 추가 재정투자. 탈원전 철회·원전 유지로 전환.',
      복지: '기본이 튼튼한 사회 프레임, 인구위기 대응 저출생 대책, 공공의료 강화.',
      안보: '대북 확성기 방송 중지(2025.6), 남북관계 신뢰 회복, 한미동맹+균형외교 병행.',
      사법개혁: '검찰 수사권 완전 박탈 유지, 공수처 강화, 사법부 독립성 제고.'
    },
    pledges_2022: [
      '부동산: 기본주택 공급, 국토보유세 도입, 토지공개념 강화, 투기억제 세제 강화',
      '경제: 전국민 기본소득(연100만원), 에너지 전환(탈원전), 재벌개혁',
      '복지: 기본소득·기본주거·기본금융 도입, 상병수당',
      '외교: 종전선언 추진, 한반도 평화 프로세스 재개'
    ],
    major_reversals: [
      '기본소득 철회: 2022년 핵심 공약이었으나 2025 대선에서 제외',
      '탈원전 철회: 원전 유지·활용으로 완전 전환 (양당 수렴)',
      '경제 우클릭: AI 산업, 210조 재정투자 등 성장 중심으로 노선 조정',
      '부동산 규제 강화: 재건축 완화 입장에서 2025년 10.15 대책으로 역방향'
    ],
    policy_execution: [
      '10.15 부동산 대책: 서울 전역 3중 규제 → 행정소송 제기됨(개혁신당)',
      '전세사기특별법 2년 연장 통과 (2025.5)',
      '다주택자 양도세 중과 배제 2026.5 만료 예정 → 재검토',
      '부동산감독원 설치법안 계류 중 (야당 반대)'
    ]
  },

  // ── 핵심 토론 쟁점 ──────────────────────────────────────────────────────
  key_conflicts: [
    {
      issue: '부동산 규제 vs 공급',
      dp: '10.15 대책으로 서울 전역 3중 규제 적용. 투기 억제·공공 공급 중심. LH 통해 기본주택 공급.',
      ppp: '규제가 오히려 공급 위축→집값 상승 유발. 민간 재건축·재개발 활성화가 핵심. 오세훈 354곳 정비구역 추진하는데 정부가 발목.',
      specific: '서울 집값: 10.15 대책 이후 강남4구 거래 급감. 노원·도봉 등 외곽은 전셋값 불안 지속.'
    },
    {
      issue: '재건축초과이익환수제(재초환)',
      dp: '재건축 이익의 사회 환원 당연. 폐지하면 개발이익 사유화.',
      ppp: '공사비 급등 시대에 재초환제는 사업성 악화→공급 감소 악순환. 즉각 폐지해야.',
      specific: '재초환 부담금 평균 3~5억원 수준 → 조합원 반발로 사업 중단 사례 증가.'
    },
    {
      issue: '다주택자 양도세 중과',
      dp: '2026.5 배제 한시 종료 후 재검토. 투기 수요 억제가 우선.',
      ppp: '다주택자도 매물 내놓게 해야 공급 늘어. 오히려 한시 배제를 영구화해야.',
      specific: '이재명-장동혁 "다주택자 6채" 설전 (2026.02): 이재명 다주택 보유 비판 vs 장동혁 반박.'
    },
    {
      issue: '기본주택 vs 민간 공급',
      dp: 'LH 기본주택 시범단지 2026 상반기 입주자 모집. 시세 대비 저렴한 공공분양 확대.',
      ppp: 'LH 부채 160조원 이상인데 기본주택 확대는 재정 파탄 초래. 민간 활력으로 공급해야.',
      specific: '3기 신도시 GTX-A 부분 개통, 인천 계양 2026 하반기 입주 예정.'
    },
    {
      issue: '기본소득 (이재명 공약 철회)',
      dp: '2022 공약이었으나 철회. "기본이 튼튼한 사회"로 전환. 재정 현실 반영.',
      ppp: '2022년에 전 국민 기본소득 약속해놓고 집권하자마자 철회. 공약 파기.',
      specific: '연 100만원 전국민 지급 → 2025 대선 공약에서 완전 삭제.'
    },
    {
      issue: '원전 (탈원전 철회)',
      dp: '탈원전 철회, 원전 유지·활용. "에너지 현실주의"로 전환.',
      ppp: '정책 일관성 부재. 2022년에 탈원전 주장하다 180도 전환.',
      specific: '현재 여야 모두 원전 유지 방향 수렴. 재생에너지 비중·신규 원전 규모서 차이.'
    },
    {
      issue: '상속세 개편',
      dp: '상속세 폐지·완화는 부자 감세. 부의 대물림 강화.',
      ppp: '상속세 최고세율 60%는 세계 최고 수준. 기업 경영권 위협, 자본 유출 원인.',
      specific: '2026년 국민의힘 1순위 경제 어젠다로 상속세 대개편 추진 선언.'
    },
    {
      issue: '예산안 (2026년도)',
      dp: '728조원 예산 여야 합의 처리. 민생 예산 증액 반영.',
      ppp: '지역화폐 예산 증액 반대. 특수활동비 삭감 요구.',
      specific: '2025.12 예산안 처리: 728조원(전년比 +3.2%), 지역화폐 예산 일부 증액 합의.'
    }
  ],

  // ── 서울시장 후보 비교 (오세훈 vs 정원오) ───────────────────────────────
  seoul_candidates: {
    ohsehoon: {
      party: '국민의힘',
      position: '서울시장 (현직)',
      housing_policy: '민간 주도 재건축·재개발 활성화, 354곳 정비구역 신규 지정, 용적률 상향, 강북 균형발전. 이재명 정부 10.15 대책 정면 비판.',
      key_arguments: [
        '재건축·재개발이 가장 빠른 공급 방법',
        '정부 규제가 도심 정비사업 차질 초래',
        '분양가상한제 폐지로 민간 공급 촉진',
        '용산 개발 vs 정부 공공주택 1만가구 계획 충돌',
        '종묘 앞 초고층 재개발 추진 (이재명 충돌)'
      ]
    },
    jungwono: {
      party: '더불어민주당',
      position: '성동구청장 / 서울시장 출마 선언',
      housing_policy: '젠트리피케이션 방지 전문가, 공공-민간 혼합 개발, 지역 주민 거주 안정 우선, 공공자산 활용 주거 안정화.',
      key_arguments: [
        '성동구 젠트리피케이션 방지 모델 서울 전역 확대',
        '재건축 시 원주민 내몰림 방지 조항 필수',
        '오세훈 재개발이 결국 집값만 올려 서민 피해',
        '공공성 강화한 민관 협력 재개발',
        '전세사기 피해자 보호 강화'
      ]
    }
  },

  // ── 국회 정당 대표 비교 (정청래 vs 장동혁) ──────────────────────────────
  national_candidates: {
    jungcr: {
      party: '더불어민주당',
      position: '당 대표',
      key_positions: [
        '내란 청산, 민주주의 수호 강조',
        '이재명 정부 국정 적극 지원',
        '검찰 수사권 완전 박탈 유지',
        '재정 확장 통한 민생 살리기'
      ],
      debate_style: '직설적·공격적, 사자성어 구사, 감정 표출, 유머와 풍자',
      attacks: [
        '국민의힘 12.3 계엄 공범론',
        '윤석열 공약 파기율 64.7% 비판',
        '사드 추가배치 무산, 여가부 폐지 실패',
        '국민의힘 상속세 폐지 = 재벌 특혜'
      ]
    },
    jangdh: {
      party: '국민의힘',
      position: '당 대표',
      key_positions: [
        '이재명 정부 부동산 대책 전면 철회 요구',
        '상속세 대개편 1호 경제 어젠다',
        '확장재정 비판, 재정 건전성 강조',
        '대북 강경 정책 유지'
      ],
      debate_style: '논리적·차분, 법률 근거 중시, 원칙주의',
      attacks: [
        '이재명 기본소득 공약 철회 = 대국민 사기',
        '탈원전 철회 = 정책 일관성 부재',
        '10.15 부동산 대책 = 반시장·공급 위축',
        '다주택자 6채 보유 이재명 위선 비판 (2026.02)'
      ]
    }
  }
};

// 주제별 관련 지식 추출
export function getTopicKnowledge(topicLabel, speaker) {
  const ppp_speaker = ['ohsehoon', 'jangdh'].includes(speaker);
  const dp_speaker = ['jungwono', 'jungcr'].includes(speaker);

  const isHousing = /부동산|재건축|재개발|주거|주택|전세|임대|분양/.test(topicLabel);
  const isEconomy = /경제|민생|예산|세금|상속|물가|일자리/.test(topicLabel);
  const isSecurity = /안보|북한|한미|외교|국방/.test(topicLabel);
  const isJustice = /검찰|사법|개혁|내란|계엄/.test(topicLabel);
  const isWelfare = /복지|기본소득|연금|의료|저출생/.test(topicLabel);
  const isEnv = /환경|탄소|에너지|원전/.test(topicLabel);

  let knowledge = [];

  if (isHousing) {
    knowledge = PARTY_KNOWLEDGE.key_conflicts.filter(c =>
      /부동산|재건축|기본주택|다주택|분양/.test(c.issue)
    );
  } else if (isEconomy) {
    knowledge = PARTY_KNOWLEDGE.key_conflicts.filter(c =>
      /예산|기본소득|상속/.test(c.issue)
    );
  } else if (isEnv) {
    knowledge = PARTY_KNOWLEDGE.key_conflicts.filter(c =>
      /원전/.test(c.issue)
    );
  }

  // 후보별 핵심 공격 포인트
  let attackPoints = [];
  if (ppp_speaker) {
    attackPoints = PARTY_KNOWLEDGE.dp.major_reversals;
    attackPoints = attackPoints.concat(
      ['민주당은 2022년 기본소득 약속 후 집권하자마자 철회',
       '탈원전 주장하다 180도 전환, 정책 신뢰 없음',
       '10.15 대책으로 서울 집값 오히려 불안 심화',
       '이재명 정부 LH 부채 160조인데 기본주택 100만호 현실성 의심']
    );
  } else if (dp_speaker) {
    attackPoints = PARTY_KNOWLEDGE.ppp.broken_pledges;
    attackPoints = attackPoints.concat(
      ['국민의힘 윤석열 공약 이행률 35.3%, 72개 공약 파기',
       '12.3 계엄 사태로 대한민국 민주주의 위기 초래',
       '250만호 공급 목표 완전 실패',
       '사드 추가배치 무산, 여가부 폐지 실패']
    );
  }

  return { conflicts: knowledge, attackPoints };
}
