/**
 * 토론 행동 묘사 100개+ — 한국 정치인/토론자 스타일
 * 클라이언트에서 30% 확률로 발언 앞에 삽입
 */

// 공통 행동 묘사
export const DEBATE_ACTIONS: string[] = [
  // ── 신체 동작 (20개) ──
  '(테이블을 가볍게 두드리며)',
  '(잠시 생각에 잠기며)',
  '(마이크를 가까이 당기며)',
  '(고개를 끄덕이며)',
  '(몸을 앞으로 기울이며)',
  '(팔짱을 끼며)',
  '(턱을 괴며)',
  '(손가락을 하나씩 세며)',
  '(자료를 넘기며)',
  '(물을 한 모금 마시며)',
  '(넥타이를 매만지며)',
  '(자세를 바로잡으며)',
  '(어깨를 펴며)',
  '(눈을 가늘게 뜨며)',
  '(손바닥을 펼쳐 보이며)',
  '(두 손을 모으며)',
  '(손가락으로 탁자를 톡톡 치며)',
  '(서류를 정리하며)',
  '(펜을 내려놓으며)',

  // ── 감정 표현 (25개) ──
  '(실소하며)',
  '(고개를 저으며)',
  '(씁쓸하게 웃으며)',
  '(한숨을 내쉬며)',
  '(눈썹을 치켜올리며)',
  '(의미심장하게 미소 지으며)',
  '(못마땅한 표정으로)',
  '(진지한 표정을 지으며)',
  '(눈을 감았다 뜨며)',
  '(비웃음을 머금으며)',
  '(당황한 기색을 감추며)',
  '(놀란 표정을 짓다가)',
  '(쓴웃음을 지으며)',
  '(냉소적으로 웃으며)',
  '(입꼬리를 올리며)',
  '(무표정하게)',
  '(단호한 표정으로)',
  '(격앙된 어조로)',
  '(담담하게)',
  '(침착하게 숨을 고르며)',
  '(미간을 찌푸리며)',
  '(눈빛을 날카롭게 하며)',
  '(차분하게 숨을 내쉬며)',
  '(입술을 꾹 다물었다가)',
  '(목소리를 가다듬으며)',

  // ── 상대를 향한 동작 (20개) ──
  '(상대를 똑바로 바라보며)',
  '(상대를 가리키며)',
  '(상대 쪽으로 몸을 돌리며)',
  '(상대의 눈을 응시하며)',
  '(손짓으로 상대를 제지하며)',
  '(상대에게 자료를 내밀며)',
  '(상대를 향해 고개를 기울이며)',
  '(상대 발언을 경청하다가)',
  '(상대의 말을 끊으며)',
  '(상대를 올려다보며)',
  '(상대에게 되묻듯)',
  '(상대를 향해 미소 짓다가)',
  '(상대의 반응을 살피며)',
  '(상대를 빤히 쳐다보며)',
  '(손으로 상대를 가리키며)',
  '(상대 쪽 자료를 집어 들며)',
  '(상대를 향해 손을 뻗으며)',
  '(상대에게 조용히 말하듯)',
  '(상대를 무시하듯 고개를 돌리며)',
  '(상대의 말이 끝나길 기다렸다가)',

  // ── 토론 특화 동작 (20개) ──
  '(목소리를 높이며)',
  '(책상을 탁 치며)',
  '(자리에서 일어서며)',
  '(주먹을 불끈 쥐며)',
  '(자료를 탁 내려놓으며)',
  '(손을 번쩍 들며)',
  '(탁자를 두드리며)',
  '(목소리에 힘을 주며)',
  '(말을 잠시 멈추며)',
  '(천천히 한 마디 한 마디 또박또박)',
  '(갑자기 속도를 높여)',
  '(낮은 목소리로)',
  '(감정을 억누르며)',
  '(여유를 부리며)',
  '(자신감 넘치는 어조로)',
  '(분명하게 발음하며)',
  '(결연한 표정으로)',
  '(조용하지만 단호하게)',
  '(말끝을 흐리며)',
  '(확신에 찬 목소리로)',

  // ── 분위기 전환 동작 (20개) ──
  '(잠시 침묵하다가)',
  '(청중을 둘러보며)',
  '(카메라를 바라보며)',
  '(자료를 새로 꺼내며)',
  '(시계를 힐끗 보며)',
  '(깊은 숨을 들이쉬며)',
  '(고개를 살짝 숙였다 들며)',
  '(의자에 깊이 앉으며)',
  '(앞으로 바짝 다가서며)',
  '(손가락을 까딱이며)',
  '(이마를 짚으며)',
  '(코를 찡긋하며)',
  '(손등으로 이마를 닦으며)',
  '(자세를 고쳐 앉으며)',
  '(뒷짐을 지며)',
  '(양손을 내려놓으며)',
  '(고개를 갸웃하며)',
  '(무릎을 탁 치며)',
  '(양손을 앞으로 모으며)',
  '(미간을 펴며)',
];

// 인물별 특화 행동 (선택적으로 사용)
export const SPEAKER_ACTIONS: Record<string, string[]> = {
  hongjunpyo: [
    '(호탕하게 웃으며)',
    '(팔짱을 끼고 비스듬히 앉으며)',
    '(손바닥으로 탁자를 내리치며)',
    '(비웃음을 머금고)',
    '(자리에서 벌떡 일어나며)',
    '(목소리를 높여 일갈하며)',
  ],
  handoonghoon: [
    '(안경을 고쳐 쓰며)',
    '(안경 너머로 날카롭게 바라보며)',
    '(차분하게 자료를 가리키며)',
    '(정중하지만 단호한 어조로)',
    '(마이크를 꽉 쥐며)',
    '(고개를 살짝 끄덕이며)',
  ],
  leejunseok: [
    '(노트북 화면을 확인하며)',
    '(데이터를 짚어가며)',
    '(콧웃음을 치며)',
    '(안경을 벗어 탁자에 내려놓으며)',
    '(손가락으로 숫자를 세며)',
  ],
  jeonhangil: [
    '(두 손을 번쩍 들며)',
    '(주먹으로 가슴을 치며)',
    '(목소리에 울림을 담아)',
    '(눈시울을 붉히며)',
    '(역사책을 펼치듯 손을 들어)',
  ],
  jungcr: [
    '(사자성어를 읊듯)',
    '(손바닥으로 탁자를 내리치며)',
    '(벌떡 일어나 상대를 가리키며)',
    '(손가락을 하나씩 세며)',
  ],
  jangdh: [
    '(서류를 정리하며)',
    '(법전을 펼치듯)',
    '(안경 너머로 날카롭게 바라보며)',
    '(냉정하게 한 마디 한 마디 또박또박)',
  ],
  ohsehoon: [
    '(당당하게 어깨를 펴며)',
    '(손으로 지도를 가리키며)',
    '(일어서서 패널을 가리키며)',
    '(자료를 넘기며)',
  ],
  jungwono: [
    '(주민 사진을 보여주며)',
    '(현장 자료를 꺼내며)',
    '(눈시울을 붉히며)',
    '(격앙된 목소리로 탁자를 치며)',
  ],
  kimeoojun: [
    '(천천히 커피를 내려놓으며)',
    '(의미심장하게 웃으며)',
    '(손가락으로 허공을 가리키며)',
    '(느릿하게 말을 이어가며)',
  ],
  jinjungkwon: [
    '(비꼬듯 미소 지으며)',
    '(콧웃음을 치며)',
    '(손으로 이마를 짚으며)',
    '(독설을 내뱉듯 빠르게)',
  ],
};

/**
 * 겹치지 않는 랜덤 행동 묘사 선택
 * @param usedActions - 이미 사용된 행동 묘사 Set
 * @param speaker - 화자 ID (선택적, 인물별 특화 행동 포함)
 */
export function getRandomAction(usedActions: Set<string>, speaker?: string): string {
  const speakerPool = speaker && SPEAKER_ACTIONS[speaker] ? SPEAKER_ACTIONS[speaker] : [];
  const availableSpeaker = speakerPool.filter(a => !usedActions.has(a));
  const availableCommon = DEBATE_ACTIONS.filter(a => !usedActions.has(a));

  // 모두 소진 시 초기화
  if (availableSpeaker.length === 0 && availableCommon.length === 0) {
    usedActions.clear();
    const fallback = [...speakerPool, ...DEBATE_ACTIONS];
    return fallback[Math.floor(Math.random() * fallback.length)]!;
  }

  let chosen: string;
  // 인물 특화 행동 50% 우선 선택 → 개성 살리기 + 안경 등 인물별 고정 행동 분리
  if (availableSpeaker.length > 0 && Math.random() < 0.5) {
    chosen = availableSpeaker[Math.floor(Math.random() * availableSpeaker.length)]!;
  } else {
    const pool = availableCommon.length > 0 ? availableCommon : availableSpeaker;
    chosen = pool[Math.floor(Math.random() * pool.length)]!;
  }

  usedActions.add(chosen);
  return chosen;
}
